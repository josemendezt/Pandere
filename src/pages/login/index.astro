---
import LayoutExt from '@/layouts/LayoutExt.astro'
import LoginForm from '@/components/login/loginForm'

if (Astro.request.method === 'POST') {
  try {
    const data = await Astro.request.formData()
    const email = data.get('email')
    const password = data.get('password')
    if (email === 'admin@gmail.com') {
      return Astro.redirect('/home')
    } else {
      return Astro.redirect('/goals/selection/pending')
    }
  } catch (error) {
    if (error instanceof Error) {
      console.error(error.message)
    }
  }
}
---

<LayoutExt title="Login to Pandere">
  <LoginForm client:only />
</LayoutExt>
